<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Form Input Organisasi / Komunitas</title>
  <style>
    :root { 
      --primary1:#00B8D9; 
      --primary2:#98DA43; 
      --primary3:#E300B5; 
      --secondary:#FF9900; 
      --neutral-dark:#222640; 
      --neutral-light:#FFFFFF; 
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;background:var(--neutral-light);color:var(--neutral-dark)}
    header{padding:24px 16px;text-align:center;background:var(--primary1);color:var(--neutral-light)}
    header h1{margin:0;font-size:clamp(20px,3vw,28px)}
    header p{margin:6px 0 0;color:var(--neutral-light)}
    .container{max-width:1000px;margin:0 auto;padding:16px}
    form{background:var(--neutral-light);border:2px solid var(--primary2);box-shadow:0 6px 20px rgba(34,38,64,.2);border-radius:16px;overflow:hidden}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .section{padding:20px;border-top:1px dashed #ddd}
    .section:first-child{border-top:none}
    h2{font-size:18px;margin:0 0 12px;color:var(--primary3)}
    label{display:block;font-weight:600;margin:8px 0 6px;color:var(--neutral-dark)}
    input, select, textarea{width:100%;padding:12px 14px;background:var(--neutral-light);border:1px solid #ccc;color:var(--neutral-dark);border-radius:10px;outline:none}
    input:focus, select:focus, textarea:focus{border-color:var(--primary1);box-shadow:0 0 0 3px rgba(0,184,217,.25)}
    .row-6{grid-column:span 6}
    .row-4{grid-column:span 4}
    .row-8{grid-column:span 8}
    .row-12{grid-column:span 12}
    .inline{display:flex;gap:10px;align-items:center}
    .btn{appearance:none;border:1px solid var(--primary1);background:var(--primary1);color:#fff;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:600;transition:0.2s}
    .btn:hover{background:var(--secondary);border-color:var(--secondary)}
    .btn.ghost{background:transparent;color:var(--primary3);border:1px solid var(--primary3)}
    .btn.ghost:hover{background:var(--primary3);color:#fff}
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .chip{background:var(--primary2);color:var(--neutral-dark);padding:6px 10px;border-radius:999px;display:inline-flex;gap:8px;align-items:center}
    .chip button{all:unset;cursor:pointer;font-weight:700;color:var(--neutral-dark)}
    .chip button:hover{color:var(--primary3)}
    .hint{font-size:12px;color:#555;margin-top:6px}
    .stack{display:flex;flex-direction:column;gap:10px}
    footer{padding:16px;background:var(--primary1);border-top:2px solid var(--primary2);text-align:center;color:var(--neutral-light)}
    footer button{margin:0 6px}
    @media (max-width:880px){.row-6,.row-4,.row-8{grid-column:span 12}}
    .upload-box {
      width: 250px;
      height: 250px;
      border: 2px dashed #999;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: #666;
      cursor: pointer;
      transition: border-color 0.3s, color 0.3s;
      position: relative;
      overflow: hidden;
      background-size: cover;
      background-position: center;
    }
    .upload-box:hover { border-color: #555; color: #333; }
    .upload-box input[type="file"] {
      opacity: 0;
      position: absolute;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>Form Input Organisasi / Komunitas</h1>
    <p>Isikan data lengkap untuk pendataan komunitas atau organisasi.</p>
  </header>

  <div class="container">
    <form id="formOrganisasi" novalidate>

      <!-- PILIHAN JENIS -->
      <div class="section">
        <h2>Jenis</h2>
        <div class="grid">
          <div class="row-6">
            <label for="jenis">Apakah entitas ini Organisasi atau Komunitas?</label>
            <select id="jenis" name="jenis" required>
              <option value="">— pilih —</option>
              <option value="organisasi">Organisasi</option>
              <option value="komunitas">Komunitas</option>
            </select>
          </div>
        </div>
      </div>

      <!-- INFORMASI ORGANISASI -->
      <div class="section">
        <h2>Informasi Organisasi / Komunitas</h2>
        <div class="grid">
          <div class="row-12">
            <label for="namaOrg">Nama Komunitas / Organisasi</label>
            <input id="namaOrg" name="namaOrg" required />
          </div>
          <div class="row-12">
            <label for="deskripsi">Deskripsi</label>
            <textarea id="deskripsi" name="deskripsi" rows="4" placeholder="Tuliskan deskripsi organisasi/komunitas"></textarea>
          </div>
          <div class="row-6">
            <label>Logo (Opsional)</label>
            <div class="upload-box" id="uploadLogo">
              Klik atau drag file di sini
              <input type="file" id="logo" name="logo" accept="image/*">
            </div>
          </div>
          <div class="row-12">
            <label for="alamat">Alamat</label>
            <textarea id="alamat" name="alamat" rows="3"></textarea>
          </div>
        </div>
      </div>

      <!-- KONTAK -->
      <div class="section">
        <h2>Kontak</h2>
        <div class="grid">
          <div class="row-6">
            <label>Nomor Telepon</label>
            <div class="stack" id="phones"></div>
            <button class="btn" type="button" onclick="addPhone()">+ Tambah Nomor</button>
          </div>
          <div class="row-6">
            <label>Email</label>
            <div class="stack" id="emails"></div>
            <button class="btn" type="button" onclick="addEmail()">+ Tambah Email</button>
          </div>
          <div class="row-12">
            <label for="narahubung">Narahubung</label>
            <input id="narahubung" name="narahubung" placeholder="Isi nama atau lookup dari data individu">
          </div>
        </div>
      </div>

      <!-- WILAYAH -->
      <div class="section">
        <h2>Wilayah</h2>
        <div class="grid">
          <div class="row-6">
            <label for="provinsi">Provinsi</label>
            <select id="provinsi" name="provinsi" required>
              <option value="">Memuat daftar provinsi…</option>
            </select>
            <div class="hint" id="provHint"></div>
          </div>
          <div class="row-6">
            <label for="kabkota">Kabupaten/Kota</label>
            <select id="kabkota" name="kabkota" required disabled>
              <option value="">Pilih provinsi terlebih dahulu</option>
            </select>
          </div>
        </div>
      </div>

      <!-- FOKUS & KEGIATAN -->
      <div class="section">
        <h2>Fokus Isu & Kegiatan</h2>
        <div class="grid">
          <div class="row-6">
            <label for="fokusIsu">Fokus Isu</label>
            <select id="fokusIsu" name="fokusIsu" required size="6" multiple>
              <option>Agama dan toleransi beragama</option>
              <option>Agraria</option>
              <option>Anak</option>
              <option>Budaya</option>
              <option>Lingkungan Hidup</option>
              <!-- tambahkan opsi lain sesuai kebutuhan -->
            </select>
          </div>
          <div class="row-6">
            <label for="kegiatanInti">Kegiatan Inti</label>
            <select id="kegiatanInti" name="kegiatanInti" required size="5" multiple>
              <option>Advokasi Kebijakan</option>
              <option>Diskusi Publik</option>
              <option>Fasilitasi</option>
              <option>Pendidikan dan Pelatihan</option>
              <option>Riset</option>
            </select>
          </div>
          <div class="row-12">
            <label for="eventHadir">Event Pernah Dihadiri</label>
            <input id="eventHadir" name="eventHadir" placeholder="Lookup dengan data event">
          </div>
        </div>
      </div>

      <!-- MEDIA SOSIAL -->
      <div class="section">
        <h2>Media Sosial</h2>
        <div class="inline">
          <select id="platform">
            <option>LinkedIn</option>
            <option>Facebook</option>
            <option>Instagram</option>
            <option>X</option>
            <option>TikTok</option>
            <option>Media Sosial Lainnya</option>
          </select>
          <input id="handle" placeholder="URL/username" />
          <button class="btn" type="button" onclick="addSocial()">+ Tambah</button>
        </div>
        <div class="chips" id="sosmedChips"></div>
      </div>

      <!-- FASILITAS -->
      <div class="section">
        <h2>Fasilitas</h2>
        <div class="grid">
          <div class="row-6">
            <label>Memiliki Ruang Offline</label>
            <div class="inline">
              <input type="checkbox" id="ruangOffline" name="ruangOffline" value="Ya" />
              <span>Ya</span>
            </div>
          </div>
        </div>
      </div>

      <!-- SUBMIT -->
      <footer>
        <button class="btn" type="submit">Simpan</button>
        <button class="btn ghost" type="reset">Reset</button>
        <div id="status" class="hint" style="margin-top:8px"></div>
      </footer>
    </form>
  </div>

  <script>
    // Preview upload Logo
    const uploadLogo = document.getElementById('uploadLogo');
    const inputLogo = document.getElementById('logo');
    inputLogo.addEventListener('change', function() {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          uploadLogo.style.backgroundImage = `url(${e.target.result})`;
          uploadLogo.textContent = '';
        }
        reader.readAsDataURL(file);
      }
    });

    function makeRemovableInput(name, type="text", placeholder="") {
      const wrap = document.createElement('div');
      wrap.className = 'inline';
      const input = document.createElement('input');
      input.type = type; input.name = name; input.placeholder = placeholder;
      const del = document.createElement('button');
      del.type = 'button'; del.className = 'btn ghost'; del.textContent = 'Hapus';
      del.onclick = () => wrap.remove();
      wrap.appendChild(input); wrap.appendChild(del);
      return wrap;
    }

    function addPhone(){
      document.getElementById('phones').appendChild(makeRemovableInput('telepon[]','tel','contoh: +62 81234567890'));
    }
    function addEmail(){
      document.getElementById('emails').appendChild(makeRemovableInput('email[]','email','nama@domain.com'));
    }
    addPhone(); addEmail();

    function addSocial(){
      const platform = document.getElementById('platform').value;
      const handle = document.getElementById('handle').value.trim();
      if(!handle){ alert('Masukkan URL/username.'); return; }
      const chip = document.createElement('div');
      chip.className = 'chip';
      chip.innerHTML = `<input type="hidden" name="sosmed[]" value="${platform}|${handle}"><strong>${platform}:</strong><span>${handle}</span><button title="Hapus">×</button>`;
      chip.querySelector('button').onclick = ()=> chip.remove();
      document.getElementById('sosmedChips').appendChild(chip);
      document.getElementById('handle').value = '';
    }

    // Load Provinsi & Kabupaten/Kota
    document.addEventListener('DOMContentLoaded', () => {
      fetch('https://www.emsifa.com/api-wilayah-indonesia/api/provinces.json')
        .then(res => res.json())
        .then(data => {
          const prov = document.getElementById('provinsi');
          prov.innerHTML = '<option value="">Pilih Provinsi</option>';
          data.forEach(p => {
            let opt = document.createElement('option');
            opt.value = p.id;
            opt.textContent = p.name;
            prov.appendChild(opt);
          });
          document.getElementById('provHint').textContent = `Total provinsi: ${data.length}`;
        });

      document.getElementById('provinsi').addEventListener('change', (e) => {
        const id = e.target.value;
        const kab = document.getElementById('kabkota');
        kab.innerHTML = '<option value="">Memuat data…</option>';
        kab.disabled = true;
        if(id){
          fetch(`https://www.emsifa.com/api-wilayah-indonesia/api/regencies/${id}.json`)
            .then(res => res.json())
            .then(data => {
              kab.innerHTML = '<option value="">Pilih Kabupaten/Kota</option>';
              data.forEach(k => {
                let opt = document.createElement('option');
                opt.value = k.id;
                opt.textContent = k.name;
                kab.appendChild(opt);
              });
              kab.disabled = false;
            });
        } else {
          kab.innerHTML = '<option value="">Pilih provinsi terlebih dahulu</option>';
          kab.disabled = true;
        }
      });
    });
  </script>
</body>
</html>
